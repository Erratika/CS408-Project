{% load static  %}
<body>
    <div id="map-wrapper" class="col-md-6 border-left border-right border-dark p-0 ">
    </div>
<script>
  {% comment %}  //Define SVG width and height
    var width = $("#map-wrapper").width();
        height = $("#map-wrapper").height();

    //Create SVG
    var svg = d3.select("#map-wrapper")
        .append('svg')
        .attr("width", width)
        .attr("height", height);



    d3.json("{% static 'hostels/maps/topo_eer.json' %}").then(function (topology) {

        //Get Json object data
        var json = topojson.feature(topology, topology.objects.eer);
        var projection = d3.geoMercator().fitExtent([[20,20],[width-20,height-20]], json);
        var path = d3.geoPath().projection(projection);

        svg.call(d3.zoom()
            .scaleExtent([1,25])
            .translateExtent([[0,0],[width,height]])
            .on("zoom",zoom));
        svg.selectAll("path")
            .data(json.features)
            .enter()
            .append("path")
            .attr("d", path)
            .attr("class", "region");

        svg.append("path")
            .datum(topojson.mesh(topology, topology.objects.eer))
            .attr("d", path)
            .attr("class", "boundary");

        $.getJSON({
            url: "/api/locations/",
            complete: function (html) {
                var json = JSON.parse(html.responseText);
                svg.selectAll("path")
                    .data(json.features)
                    .enter()
                    .append("circle")
                    .attr("class", "hostel")
                    .attr("cx", function (d) {
                        return projection(d.geometry.coordinates)[0];
                    })
                    .attr("cy", function (d) {
                        return projection(d.geometry.coordinates)[1];
                    })
                    .attr("r", "2px")
                    .attr("fill", "red")
            }
        });
    });
    function zoom() {
        svg.selectAll("path")
            .attr('transform', d3.event.transform)
            .style('stroke-width', 1/d3.event.transform.k + 'px');
        svg.selectAll("circle")
            .attr('transform', d3.event.transform)
            .attr('r', 2 / d3.event.transform.k + 'px')
    }{% endcomment %}

</script>

</body>